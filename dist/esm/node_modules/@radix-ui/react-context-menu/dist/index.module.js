import { useCallbackRef } from '../../react-use-callback-ref/dist/index.module.js';
import { createMenuScope as S, Sub, Root as Root$1, Anchor, Content as Content$1, Label as Label$1, Item as Item$1, CheckboxItem as CheckboxItem$1, RadioGroup as RadioGroup$1, RadioItem as RadioItem$1, ItemIndicator as ItemIndicator$1 } from '../../react-menu/dist/index.module.js';
import { Primitive } from '../../react-primitive/dist/index.module.js';
import { createContextScope } from '../../react-context/dist/index.module.js';
import { composeEventHandlers } from '../../primitive/dist/index.module.js';
import * as React from 'react';
import _extends from '../../../@babel/runtime/helpers/esm/extends.js';

const [s,i]=createContextScope("ContextMenu",[S]);const x=S(),[p,C]=s("ContextMenu");const ContextMenu=n=>{const{__scopeContextMenu:o,children:r,onOpenChange:c,dir:s,modal:i=!0}=n,[C,m]=React.useState(!1),f=l("ContextMenu",o),d=x(o),M=useCallbackRef(c),R=React.useCallback((e=>{m(e),M(e);}),[M]);return f.isInsideContent?/*#__PURE__*/React.createElement(p,{scope:o,isRootMenu:!1,open:C,onOpenChange:R,modal:i},/*#__PURE__*/React.createElement(Sub,_extends({},d,{open:C,onOpenChange:R}),r)):/*#__PURE__*/React.createElement(p,{scope:o,isRootMenu:!0,open:C,onOpenChange:R,modal:i},/*#__PURE__*/React.createElement(Root$1,_extends({},d,{dir:s,open:C,onOpenChange:R,modal:i}),r))};const ContextMenuTrigger=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:r,...s}=e,i=C("ContextMenuTrigger",r),p=x(r),l=React.useRef({x:0,y:0}),f=React.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),M=React.useRef(0),R=React.useCallback((()=>window.clearTimeout(M.current)),[]),_=e=>{l.current={x:e.clientX,y:e.clientY},i.onOpenChange(!0);};return React.useEffect((()=>R),[R]),/*#__PURE__*/React.createElement(m,{scope:r,isInsideContent:!1},/*#__PURE__*/React.createElement(Anchor,_extends({},p,{virtualRef:f})),/*#__PURE__*/React.createElement(Primitive.span,_extends({},s,{ref:n,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:composeEventHandlers(e.onContextMenu,(e=>{R(),e.preventDefault(),_(e);})),onPointerDown:composeEventHandlers(e.onPointerDown,d((e=>{R(),M.current=window.setTimeout((()=>_(e)),700);}))),onPointerMove:composeEventHandlers(e.onPointerMove,d(R)),onPointerCancel:composeEventHandlers(e.onPointerCancel,d(R)),onPointerUp:composeEventHandlers(e.onPointerUp,d(R))})))}));const[m,l]=s("ContextMenuContent",{isInsideContent:!1});const ContextMenuContent=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=C("ContextMenuContent",o),s=x(o),i={...r,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)"}};return React.createElement(m,{scope:o,isInsideContent:!0},c.isRootMenu?/*#__PURE__*/React.createElement(f,_extends({__scopeContextMenu:o},i,{ref:n})):/*#__PURE__*/React.createElement(Content$1,_extends({},s,i,{ref:n})))}));const f=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=C("ContextMenuContent",o),s=x(o),i=React.useRef(!1);return React.createElement(Content$1,_extends({},s,r,{ref:n,portalled:!0,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1;},onInteractOutside:t=>{var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||c.modal||(i.current=!0);}}))}));const ContextMenuLabel=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(Label$1,_extends({},c,r,{ref:n}))}));const ContextMenuItem=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(Item$1,_extends({},c,r,{ref:n}))}));const ContextMenuCheckboxItem=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(CheckboxItem$1,_extends({},c,r,{ref:n}))}));const ContextMenuRadioGroup=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(RadioGroup$1,_extends({},c,r,{ref:n}))}));const ContextMenuRadioItem=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(RadioItem$1,_extends({},c,r,{ref:n}))}));const ContextMenuItemIndicator=/*#__PURE__*/React.forwardRef(((e,n)=>{const{__scopeContextMenu:o,...r}=e,c=x(o);return React.createElement(ItemIndicator$1,_extends({},c,r,{ref:n}))}));function d(e){return t=>"mouse"!==t.pointerType?e(t):void 0}const Root=ContextMenu;const Trigger=ContextMenuTrigger;const Content=ContextMenuContent;const Label=ContextMenuLabel;const Item=ContextMenuItem;const CheckboxItem=ContextMenuCheckboxItem;const RadioGroup=ContextMenuRadioGroup;const RadioItem=ContextMenuRadioItem;const ItemIndicator=ContextMenuItemIndicator;

export { CheckboxItem, Content, ContextMenu, ContextMenuCheckboxItem, ContextMenuContent, ContextMenuItem, ContextMenuItemIndicator, ContextMenuLabel, ContextMenuRadioGroup, ContextMenuRadioItem, ContextMenuTrigger, Item, ItemIndicator, Label, RadioGroup, RadioItem, Root, Trigger, i as createContextMenuScope };
