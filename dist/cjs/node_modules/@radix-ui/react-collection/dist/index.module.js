'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index_module$2 = require('../../react-slot/dist/index.module.js');
var index_module$1 = require('../../react-compose-refs/dist/index.module.js');
var index_module = require('../../react-context/dist/index.module.js');
var React = require('react');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);

function createCollection(c){const n=c+"CollectionProvider",[l,i]=index_module.createContextScope(n),[f,a]=l(n,{collectionRef:{current:null},itemMap:new Map}),u=e=>{const{scope:r,children:t}=e,c=React__default["default"].useRef(null),n=React__default["default"].useRef(new Map).current;return React__default["default"].createElement(f,{scope:r,itemMap:n,collectionRef:c},t)},m=c+"CollectionSlot",s=/*#__PURE__*/React__default["default"].forwardRef(((t,c)=>{const{scope:n,children:l}=t,i=a(m,n),f=index_module$1.useComposedRefs(c,i.collectionRef);return React__default["default"].createElement(index_module$2.Slot,{ref:f},l)})),p=c+"CollectionItemSlot",d="data-radix-collection-item",R=/*#__PURE__*/React__default["default"].forwardRef(((t,c)=>{const{scope:n,children:l,...i}=t,f=React__default["default"].useRef(null),u=index_module$1.useComposedRefs(c,f),m=a(p,n);return React__default["default"].useEffect((()=>(m.itemMap.set(f,{ref:f,...i}),()=>{m.itemMap.delete(f);}))),/*#__PURE__*/React__default["default"].createElement(index_module$2.Slot,{[d]:"",ref:u},l)}));return [{Provider:u,Slot:s,ItemSlot:R},function(e){const r=a(c+"CollectionConsumer",e);return React__default["default"].useCallback((()=>{const e=r.collectionRef.current;if(!e)return [];const t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)))}),[r.collectionRef,r.itemMap])},i]}

exports.createCollection = createCollection;
