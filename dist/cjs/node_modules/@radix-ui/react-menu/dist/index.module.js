'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index_module$6 = require('../../react-id/dist/index.module.js');
var index_module$a = require('../../react-focus-guards/dist/index.module.js');
var index_module$4 = require('../../react-use-callback-ref/dist/index.module.js');
var index_module$5 = require('../../react-use-direction/dist/index.module.js');
var index_module$3 = require('../../react-roving-focus/dist/index.module.js');
var index_module$e = require('../../react-portal/dist/index.module.js');
var index_module$2 = require('../../react-popper/dist/index.module.js');
var index_module$d = require('../../react-primitive/dist/index.module.js');
var index_module$7 = require('../../react-presence/dist/index.module.js');
var index_module$b = require('../../react-focus-scope/dist/index.module.js');
var index_module$c = require('../../react-dismissable-layer/dist/index.module.js');
var index_module$1 = require('../../react-context/dist/index.module.js');
var index_module$8 = require('../../react-compose-refs/dist/index.module.js');
var index_module = require('../../react-collection/dist/index.module.js');
var index_module$9 = require('../../primitive/dist/index.module.js');
var index = require('../../../aria-hidden/dist/es2015/index.js');
var Combination = require('../../../react-remove-scroll/dist/es2015/Combination.js');
var React = require('react');
var _extends = require('../../../@babel/runtime/helpers/esm/extends.js');

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () { return e[k]; }
				});
			}
		});
	}
	n["default"] = e;
	return Object.freeze(n);
}

var React__namespace = /*#__PURE__*/_interopNamespace(React);

const x=["Enter"," "],b=["ArrowUp","PageDown","End"],R=["ArrowDown","PageUp","Home",...b],_={ltr:[...x,"ArrowRight"],rtl:[...x,"ArrowLeft"]},y={ltr:["ArrowLeft"],rtl:["ArrowRight"]},[I,k,P]=index_module.createCollection("Menu"),[D,S]=index_module$1.createContextScope("Menu",[P,index_module$2.createPopperScope,index_module$3.createRovingFocusGroupScope]);const O=index_module$2.createPopperScope(),T=index_module$3.createRovingFocusGroupScope(),[L,A]=D("Menu");const Menu=e=>{const{__scopeMenu:n,open:o=!1,children:u,onOpenChange:c,modal:i=!0}=e,s=O(n),[l,d]=React__namespace.useState(null),p=React__namespace.useRef(!1),f=index_module$4.useCallbackRef(c),m=index_module$5.useDirection(l,e.dir);return React__namespace.useEffect((()=>{const e=()=>{p.current=!0,document.addEventListener("pointerdown",n,{capture:!0,once:!0}),document.addEventListener("pointermove",n,{capture:!0,once:!0});},n=()=>p.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",n,{capture:!0}),document.removeEventListener("pointermove",n,{capture:!0});}}),[]),/*#__PURE__*/React__namespace.createElement(index_module$2.Root,s,/*#__PURE__*/React__namespace.createElement(L,{scope:n,isSubmenu:!1,isUsingKeyboardRef:p,dir:m,open:o,onOpenChange:f,content:l,onContentChange:d,onRootClose:React__namespace.useCallback((()=>f(!1)),[f]),modal:i},u))};const MenuSub=n=>{const{__scopeMenu:r,children:o,open:u=!1,onOpenChange:c}=n,i=A("MenuSub",r),s=O(r),[l,d]=React__namespace.useState(null),[p,f]=React__namespace.useState(null),m=index_module$4.useCallbackRef(c);return React__namespace.useEffect((()=>(!1===i.open&&m(!1),()=>m(!1))),[i.open,m]),/*#__PURE__*/React__namespace.createElement(index_module$2.Root,s,/*#__PURE__*/React__namespace.createElement(L,{scope:r,isSubmenu:!0,isUsingKeyboardRef:i.isUsingKeyboardRef,dir:i.dir,open:u,onOpenChange:m,content:p,onContentChange:f,onRootClose:i.onRootClose,contentId:index_module$6.useId(),trigger:l,onTriggerChange:d,triggerId:index_module$6.useId(),modal:!1},o))};const MenuAnchor=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e,o=O(t);return React__namespace.createElement(index_module$2.Anchor,_extends["default"]({},o,r,{ref:n}))}));const[F,K]=D("MenuContent");const MenuContent=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{forceMount:t,...r}=e,o=A("MenuContent",e.__scopeMenu);return React__namespace.createElement(I.Provider,{scope:e.__scopeMenu},/*#__PURE__*/React__namespace.createElement(index_module$7.Presence,{present:t||o.open},/*#__PURE__*/React__namespace.createElement(I.Slot,{scope:e.__scopeMenu},o.isSubmenu?/*#__PURE__*/React__namespace.createElement(X,_extends["default"]({},r,{ref:n})):/*#__PURE__*/React__namespace.createElement(G,_extends["default"]({},r,{ref:n})))))}));const G=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>A("MenuContent",e.__scopeMenu).modal?/*#__PURE__*/React__namespace.createElement(U,_extends["default"]({},e,{ref:n})):/*#__PURE__*/React__namespace.createElement(V,_extends["default"]({},e,{ref:n})))),U=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const t=A("MenuContent",e.__scopeMenu),r=React__namespace.useRef(null),o=index_module$8.useComposedRefs(n,r);return React__namespace.useEffect((()=>{const e=r.current;if(e)return index.hideOthers(e)}),[]),/*#__PURE__*/React__namespace.createElement(B,_extends["default"]({},e,{ref:o,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:index_module$9.composeEventHandlers(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)}))})),V=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const t=A("MenuContent",e.__scopeMenu);return React__namespace.createElement(B,_extends["default"]({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)}))})),X=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const t=A("MenuContent",e.__scopeMenu),r=React__namespace.useRef(null),o=index_module$8.useComposedRefs(n,r);return t.isSubmenu?/*#__PURE__*/React__namespace.createElement(B,_extends["default"]({id:t.contentId,"aria-labelledby":t.triggerId},e,{ref:o,align:"start",side:"rtl"===t.dir?"left":"right",portalled:!0,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var n;t.isUsingKeyboardRef.current&&(null===(n=r.current)||void 0===n||n.focus()),e.preventDefault();},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:index_module$9.composeEventHandlers(e.onFocusOutside,(e=>{e.target!==t.trigger&&t.onOpenChange(!1);})),onEscapeKeyDown:index_module$9.composeEventHandlers(e.onEscapeKeyDown,t.onRootClose),onKeyDown:index_module$9.composeEventHandlers(e.onKeyDown,(e=>{const n=e.currentTarget.contains(e.target),r=y[t.dir].includes(e.key);var o;n&&r&&(t.onOpenChange(!1),null===(o=t.trigger)||void 0===o||o.focus(),e.preventDefault());}))})):null})),B=/*#__PURE__*/React__namespace.forwardRef(((e,t)=>{const{__scopeMenu:r,loop:u=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:l,disableOutsidePointerEvents:f,onEscapeKeyDown:v,onPointerDownOutside:g,onFocusOutside:h,onInteractOutside:x,onDismiss:_,disableOutsideScroll:y,allowPinchZoom:I,portalled:P,...D}=e,S=A("MenuContent",r),L=O(r),K=T(r),G=k(r),[U,V]=React__namespace.useState(null),X=React__namespace.useRef(null),B=index_module$8.useComposedRefs(t,X,S.onContentChange),Y=React__namespace.useRef(0),Z=React__namespace.useRef(""),z=React__namespace.useRef(0),H=React__namespace.useRef(null),W=React__namespace.useRef("right"),q=React__namespace.useRef(0),N=P?index_module$e.Portal:React__namespace.Fragment,Q=y?Combination["default"]:React__namespace.Fragment,$=y?{allowPinchZoom:I}:void 0,ee=e=>{var n,t;const r=Z.current+e,o=G().filter((e=>!e.disabled)),u=document.activeElement,c=null===(n=o.find((e=>e.ref.current===u)))||void 0===n?void 0:n.textValue,a=function(e,n,t){const r=n.length>1&&Array.from(n).every((e=>e===n[0]))?n[0]:n,o=t?e.indexOf(t):-1;let u=(c=e,a=Math.max(o,0),c.map(((e,n)=>c[(a+n)%c.length])));var c,a;1===r.length&&(u=u.filter((e=>e!==t)));const i=u.find((e=>e.toLowerCase().startsWith(r.toLowerCase())));return i!==t?i:void 0}(o.map((e=>e.textValue)),r,c),i=null===(t=o.find((e=>e.textValue===a)))||void 0===t?void 0:t.ref.current;!function e(n){Z.current=n,window.clearTimeout(Y.current),""!==n&&(Y.current=window.setTimeout((()=>e("")),1e3));}(r),i&&setTimeout((()=>i.focus()));};React__namespace.useEffect((()=>()=>window.clearTimeout(Y.current)),[]),index_module$a.useFocusGuards();const ne=React__namespace.useCallback((e=>{var n,t;return W.current===(null===(n=H.current)||void 0===n?void 0:n.side)&&function(e,n){if(!n)return !1;return function(e,n){const{x:t,y:r}=e;let o=!1;for(let e=0,u=n.length-1;e<n.length;u=e++){const c=n[e].x,a=n[e].y,i=n[u].x,s=n[u].y;a>r!=s>r&&t<(i-c)*(r-a)/(s-a)+c&&(o=!o);}return o}({x:e.clientX,y:e.clientY},n)}(e,null===(t=H.current)||void 0===t?void 0:t.area)}),[]);return React__namespace.createElement(N,null,/*#__PURE__*/React__namespace.createElement(Q,$,/*#__PURE__*/React__namespace.createElement(F,{scope:r,searchRef:Z,onItemEnter:React__namespace.useCallback((e=>{ne(e)&&e.preventDefault();}),[ne]),onItemLeave:React__namespace.useCallback((e=>{var n;ne(e)||(null===(n=X.current)||void 0===n||n.focus(),V(null));}),[ne]),onTriggerLeave:React__namespace.useCallback((e=>{ne(e)&&e.preventDefault();}),[ne]),pointerGraceTimerRef:z,onPointerGraceIntentChange:React__namespace.useCallback((e=>{H.current=e;}),[])},/*#__PURE__*/React__namespace.createElement(index_module$b.FocusScope,{asChild:!0,trapped:i,onMountAutoFocus:index_module$9.composeEventHandlers(s,(e=>{var n;e.preventDefault(),null===(n=X.current)||void 0===n||n.focus();})),onUnmountAutoFocus:l},/*#__PURE__*/React__namespace.createElement(index_module$c.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:v,onPointerDownOutside:g,onFocusOutside:h,onInteractOutside:x,onDismiss:_},/*#__PURE__*/React__namespace.createElement(index_module$3.Root,_extends["default"]({asChild:!0},K,{dir:S.dir,orientation:"vertical",loop:u,currentTabStopId:U,onCurrentTabStopIdChange:V,onEntryFocus:e=>{S.isUsingKeyboardRef.current||e.preventDefault();}}),/*#__PURE__*/React__namespace.createElement(index_module$2.Content,_extends["default"]({role:"menu","aria-orientation":"vertical","data-state":j(S.open),dir:S.dir},L,D,{ref:B,style:{outline:"none",...D.style},onKeyDown:index_module$9.composeEventHandlers(D.onKeyDown,(e=>{const n=e.target,t=e.currentTarget.contains(n),r=e.ctrlKey||e.altKey||e.metaKey,o=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&o&&ee(e.key));const u=X.current;if(e.target!==u)return;if(!R.includes(e.key))return;e.preventDefault();const c=G().filter((e=>!e.disabled)).map((e=>e.ref.current));b.includes(e.key)&&c.reverse(),function(e){const n=document.activeElement;for(const t of e){if(t===n)return;if(t.focus(),document.activeElement!==n)return}}(c);})),onBlur:index_module$9.composeEventHandlers(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(Y.current),Z.current="");})),onPointerMove:index_module$9.composeEventHandlers(e.onPointerMove,J((e=>{const n=e.target,t=q.current!==e.clientX;if(e.currentTarget.contains(n)&&t){const n=e.clientX>q.current?"right":"left";W.current=n,q.current=e.clientX;}})))}))))))))}));const MenuGroup=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e;return React__namespace.createElement(index_module$d.Primitive.div,_extends["default"]({role:"group"},r,{ref:n}))}));const MenuLabel=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e;return React__namespace.createElement(index_module$d.Primitive.div,_extends["default"]({},r,{ref:n}))}));const MenuItem=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{disabled:t=!1,onSelect:r,...o}=e,u=React__namespace.useRef(null),c=A("MenuItem",e.__scopeMenu),a=K("MenuItem",e.__scopeMenu),i=index_module$8.useComposedRefs(n,u),s=React__namespace.useRef(!1);return React__namespace.createElement(Y,_extends["default"]({},o,{ref:i,disabled:t,onClick:index_module$9.composeEventHandlers(e.onClick,(()=>{const e=u.current;if(!t&&e){const n=new Event("menu.itemSelect",{bubbles:!0,cancelable:!0});e.addEventListener("menu.itemSelect",(e=>null==r?void 0:r(e)),{once:!0}),e.dispatchEvent(n),n.defaultPrevented?s.current=!1:c.onRootClose();}})),onPointerDown:n=>{var t;null===(t=e.onPointerDown)||void 0===t||t.call(e,n),s.current=!0;},onPointerUp:index_module$9.composeEventHandlers(e.onPointerUp,(e=>{var n;s.current||null===(n=e.currentTarget)||void 0===n||n.click();})),onKeyDown:index_module$9.composeEventHandlers(e.onKeyDown,(e=>{const n=""!==a.searchRef.current;t||n&&" "===e.key||x.includes(e.key)&&(e.currentTarget.click(),e.preventDefault());}))}))}));const MenuSubTrigger=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const t=A("MenuSubTrigger",e.__scopeMenu),r=K("MenuSubTrigger",e.__scopeMenu),o=React__namespace.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:c}=r,a={__scopeMenu:e.__scopeMenu},i=React__namespace.useCallback((()=>{o.current&&window.clearTimeout(o.current),o.current=null;}),[]);return React__namespace.useEffect((()=>i),[i]),React__namespace.useEffect((()=>{const e=u.current;return ()=>{window.clearTimeout(e),c(null);}}),[u,c]),t.isSubmenu?/*#__PURE__*/React__namespace.createElement(MenuAnchor,_extends["default"]({asChild:!0},a),/*#__PURE__*/React__namespace.createElement(Y,_extends["default"]({id:t.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":t.contentId,"data-state":j(t.open)},e,{ref:index_module$8.composeRefs(n,t.onTriggerChange),onClick:n=>{var r;null===(r=e.onClick)||void 0===r||r.call(e,n),e.disabled||n.defaultPrevented||(n.currentTarget.focus(),t.open||t.onOpenChange(!0));},onPointerMove:index_module$9.composeEventHandlers(e.onPointerMove,J((n=>{r.onItemEnter(n),n.defaultPrevented||e.disabled||t.open||o.current||(r.onPointerGraceIntentChange(null),o.current=window.setTimeout((()=>{t.onOpenChange(!0),i();}),100));}))),onPointerLeave:index_module$9.composeEventHandlers(e.onPointerLeave,J((e=>{var n;i();const o=null===(n=t.content)||void 0===n?void 0:n.getBoundingClientRect();if(o){var c;const n=null===(c=t.content)||void 0===c?void 0:c.dataset.side,a="right"===n,i=a?-5:5,s=o[a?"left":"right"],l=o[a?"right":"left"];r.onPointerGraceIntentChange({area:[{x:e.clientX+i,y:e.clientY},{x:s,y:o.top},{x:l,y:o.top},{x:l,y:o.bottom},{x:s,y:o.bottom}],side:n}),window.clearTimeout(u.current),u.current=window.setTimeout((()=>r.onPointerGraceIntentChange(null)),300);}else {if(r.onTriggerLeave(e),e.defaultPrevented)return;r.onPointerGraceIntentChange(null);}}))),onKeyDown:index_module$9.composeEventHandlers(e.onKeyDown,(n=>{const o=""!==r.searchRef.current;var u;e.disabled||o&&" "===n.key||_[t.dir].includes(n.key)&&(t.onOpenChange(!0),null===(u=t.content)||void 0===u||u.focus(),n.preventDefault());}))}))):null}));const Y=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:u,...c}=e,a=K("MenuItem",t),i=T(t),l=React__namespace.useRef(null),d=index_module$8.useComposedRefs(n,l),[p,f]=React__namespace.useState("");return React__namespace.useEffect((()=>{const e=l.current;var n;e&&f((null!==(n=e.textContent)&&void 0!==n?n:"").trim());}),[c.children]),/*#__PURE__*/React__namespace.createElement(I.ItemSlot,{scope:t,disabled:r,textValue:null!=u?u:p},/*#__PURE__*/React__namespace.createElement(index_module$3.Item,_extends["default"]({asChild:!0},i,{focusable:!r}),/*#__PURE__*/React__namespace.createElement(index_module$d.Primitive.div,_extends["default"]({role:"menuitem","aria-disabled":r||void 0,"data-disabled":r?"":void 0},c,{ref:d,onPointerMove:index_module$9.composeEventHandlers(e.onPointerMove,J((e=>{if(r)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus();}}))),onPointerLeave:index_module$9.composeEventHandlers(e.onPointerLeave,J((e=>a.onItemLeave(e))))}))))}));const MenuCheckboxItem=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{checked:t=!1,onCheckedChange:r,...o}=e;return React__namespace.createElement(H,{scope:e.__scopeMenu,checked:t},/*#__PURE__*/React__namespace.createElement(MenuItem,_extends["default"]({role:"menuitemcheckbox","aria-checked":t},o,{ref:n,"data-state":q(t),onSelect:index_module$9.composeEventHandlers(o.onSelect,(()=>null==r?void 0:r(!t)),{checkForDefaultPrevented:!1})})))}));const[Z,z]=D("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});const MenuRadioGroup=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{value:r,onValueChange:o,...u}=e,c=index_module$4.useCallbackRef(o);return React__namespace.createElement(Z,{scope:e.__scopeMenu,value:r,onValueChange:c},/*#__PURE__*/React__namespace.createElement(MenuGroup,_extends["default"]({},u,{ref:n})))}));const MenuRadioItem=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{value:t,...r}=e,o=z("MenuRadioItem",e.__scopeMenu),u=t===o.value;return React__namespace.createElement(H,{scope:e.__scopeMenu,checked:u},/*#__PURE__*/React__namespace.createElement(MenuItem,_extends["default"]({role:"menuitemradio","aria-checked":u},r,{ref:n,"data-state":q(u),onSelect:index_module$9.composeEventHandlers(r.onSelect,(()=>{var e;return null===(e=o.onValueChange)||void 0===e?void 0:e.call(o,t)}),{checkForDefaultPrevented:!1})})))}));const[H,W]=D("MenuItemIndicator",{checked:!1});const MenuItemIndicator=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,forceMount:r,...o}=e,u=W("MenuItemIndicator",t);return React__namespace.createElement(index_module$7.Presence,{present:r||u.checked},/*#__PURE__*/React__namespace.createElement(index_module$d.Primitive.span,_extends["default"]({},o,{ref:n,"data-state":q(u.checked)})))}));const MenuArrow=/*#__PURE__*/React__namespace.forwardRef(((e,n)=>{const{__scopeMenu:t,...r}=e,o=O(t);return React__namespace.createElement(index_module$2.Arrow,_extends["default"]({},o,r,{ref:n}))}));function j(e){return e?"open":"closed"}function q(e){return e?"checked":"unchecked"}function J(e){return n=>"mouse"===n.pointerType?e(n):void 0}const Root=Menu;const Sub=MenuSub;const Anchor=MenuAnchor;const SubTrigger=MenuSubTrigger;const Content=MenuContent;const Label=MenuLabel;const Item=MenuItem;const CheckboxItem=MenuCheckboxItem;const RadioGroup=MenuRadioGroup;const RadioItem=MenuRadioItem;const ItemIndicator=MenuItemIndicator;const Arrow=MenuArrow;

exports.Anchor = Anchor;
exports.Arrow = Arrow;
exports.CheckboxItem = CheckboxItem;
exports.Content = Content;
exports.Item = Item;
exports.ItemIndicator = ItemIndicator;
exports.Label = Label;
exports.Menu = Menu;
exports.MenuAnchor = MenuAnchor;
exports.MenuArrow = MenuArrow;
exports.MenuCheckboxItem = MenuCheckboxItem;
exports.MenuContent = MenuContent;
exports.MenuGroup = MenuGroup;
exports.MenuItem = MenuItem;
exports.MenuItemIndicator = MenuItemIndicator;
exports.MenuLabel = MenuLabel;
exports.MenuRadioGroup = MenuRadioGroup;
exports.MenuRadioItem = MenuRadioItem;
exports.MenuSub = MenuSub;
exports.MenuSubTrigger = MenuSubTrigger;
exports.RadioGroup = RadioGroup;
exports.RadioItem = RadioItem;
exports.Root = Root;
exports.Sub = Sub;
exports.SubTrigger = SubTrigger;
exports.createMenuScope = S;
