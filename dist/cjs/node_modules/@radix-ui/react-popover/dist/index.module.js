'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var index = require('../../../aria-hidden/dist/es2015/index.js');
var Combination = require('../../../react-remove-scroll/dist/es2015/Combination.js');
var index_module$3 = require('../../react-id/dist/index.module.js');
var index_module$5 = require('../../react-primitive/dist/index.module.js');
var index_module$7 = require('../../react-presence/dist/index.module.js');
var index_module$9 = require('../../react-focus-guards/dist/index.module.js');
var index_module$8 = require('../../react-portal/dist/index.module.js');
var index_module$a = require('../../react-focus-scope/dist/index.module.js');
var index_module$b = require('../../react-dismissable-layer/dist/index.module.js');
var index_module$1 = require('../../react-popper/dist/index.module.js');
var index_module$2 = require('../../react-use-controllable-state/dist/index.module.js');
var index_module = require('../../react-context/dist/index.module.js');
var index_module$4 = require('../../react-compose-refs/dist/index.module.js');
var index_module$6 = require('../../primitive/dist/index.module.js');
var React = require('react');
var _extends = require('../../../@babel/runtime/helpers/esm/extends.js');

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () { return e[k]; }
				});
			}
		});
	}
	n["default"] = e;
	return Object.freeze(n);
}

var React__namespace = /*#__PURE__*/_interopNamespace(React);

const [C,g]=index_module.createContextScope("Popover",[index_module$1.createPopperScope]);const x=index_module$1.createPopperScope(),[h,E]=C("Popover");const Popover=e=>{const{__scopePopover:o,children:t,open:n,defaultOpen:c,onOpenChange:a,modal:s=!1}=e,i=x(o),u=React__namespace.useRef(null),[d,m]=React__namespace.useState(!1),[f=!1,P]=index_module$2.useControllableState({prop:n,defaultProp:c,onChange:a});return React__namespace.createElement(index_module$1.Root,i,/*#__PURE__*/React__namespace.createElement(h,{scope:o,contentId:index_module$3.useId(),triggerRef:u,open:f,onOpenChange:P,onOpenToggle:React__namespace.useCallback((()=>P((e=>!e))),[P]),hasCustomAnchor:d,onCustomAnchorAdd:React__namespace.useCallback((()=>m(!0)),[]),onCustomAnchorRemove:React__namespace.useCallback((()=>m(!1)),[]),modal:s},t))};const PopoverTrigger=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{__scopePopover:r,...n}=e,c=E("PopoverTrigger",r),a=x(r),s=index_module$4.useComposedRefs(o,c.triggerRef),i=/*#__PURE__*/React__namespace.createElement(index_module$5.Primitive.button,_extends["default"]({type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":w(c.open)},n,{ref:s,onClick:index_module$6.composeEventHandlers(e.onClick,c.onOpenToggle)}));return c.hasCustomAnchor?i:/*#__PURE__*/React__namespace.createElement(index_module$1.Anchor,_extends["default"]({asChild:!0},a),i)}));const PopoverContent=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{forceMount:r,...t}=e,c=E("PopoverContent",e.__scopePopover);return React__namespace.createElement(index_module$7.Presence,{present:r||c.open},c.modal?/*#__PURE__*/React__namespace.createElement(A,_extends["default"]({},t,{ref:o})):/*#__PURE__*/React__namespace.createElement(O,_extends["default"]({},t,{ref:o})))}));const A=/*#__PURE__*/React__namespace.forwardRef(((r,t)=>{const{allowPinchZoom:n,portalled:c=!0,...s}=r,i=E("PopoverContent",r.__scopePopover),p=React__namespace.useRef(null),u=index_module$4.useComposedRefs(t,p),l=React__namespace.useRef(!1);React__namespace.useEffect((()=>{const o=p.current;if(o)return index.hideOthers(o)}),[]);const d=c?index_module$8.Portal:React__namespace.Fragment;return React__namespace.createElement(d,null,/*#__PURE__*/React__namespace.createElement(Combination["default"],{allowPinchZoom:n},/*#__PURE__*/React__namespace.createElement(R,_extends["default"]({},s,{ref:u,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:index_module$6.composeEventHandlers(r.onCloseAutoFocus,(e=>{var o;e.preventDefault(),l.current||null===(o=i.triggerRef.current)||void 0===o||o.focus();})),onPointerDownOutside:index_module$6.composeEventHandlers(r.onPointerDownOutside,(e=>{const o=e.detail.originalEvent,r=0===o.button&&!0===o.ctrlKey,t=2===o.button||r;l.current=t;}),{checkForDefaultPrevented:!1}),onFocusOutside:index_module$6.composeEventHandlers(r.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})}))))})),O=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{portalled:r=!0,...t}=e,n=E("PopoverContent",e.__scopePopover),c=React__namespace.useRef(!1),s=r?index_module$8.Portal:React__namespace.Fragment;return React__namespace.createElement(s,null,/*#__PURE__*/React__namespace.createElement(R,_extends["default"]({},t,{ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var r,t;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,o),o.defaultPrevented)||(c.current||null===(t=n.triggerRef.current)||void 0===t||t.focus(),o.preventDefault());c.current=!1;},onInteractOutside:o=>{var r,t;null===(r=e.onInteractOutside)||void 0===r||r.call(e,o),o.defaultPrevented||(c.current=!0);const a=o.target;(null===(t=n.triggerRef.current)||void 0===t?void 0:t.contains(a))&&o.preventDefault();}})))})),R=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{__scopePopover:r,trapFocus:t,onOpenAutoFocus:n,onCloseAutoFocus:a,disableOutsidePointerEvents:u,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:f,...C}=e,g=E("PopoverContent",r),h=x(r);return index_module$9.useFocusGuards(),/*#__PURE__*/React__namespace.createElement(index_module$a.FocusScope,{asChild:!0,loop:!0,trapped:t,onMountAutoFocus:n,onUnmountAutoFocus:a},/*#__PURE__*/React__namespace.createElement(index_module$b.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:m,onDismiss:()=>g.onOpenChange(!1)},/*#__PURE__*/React__namespace.createElement(index_module$1.Content,_extends["default"]({"data-state":w(g.open),role:"dialog",id:g.contentId},h,C,{ref:o,style:{...C.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))}));const PopoverClose=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{__scopePopover:r,...n}=e,c=E("PopoverClose",r);return React__namespace.createElement(index_module$5.Primitive.button,_extends["default"]({type:"button"},n,{ref:o,onClick:index_module$6.composeEventHandlers(e.onClick,(()=>c.onOpenChange(!1)))}))}));const PopoverArrow=/*#__PURE__*/React__namespace.forwardRef(((e,o)=>{const{__scopePopover:r,...t}=e,n=x(r);return React__namespace.createElement(index_module$1.Arrow,_extends["default"]({},n,t,{ref:o}))}));function w(e){return e?"open":"closed"}const Root=Popover;const Trigger=PopoverTrigger;const Content=PopoverContent;const Close=PopoverClose;const Arrow=PopoverArrow;

exports.Arrow = Arrow;
exports.Close = Close;
exports.Content = Content;
exports.Popover = Popover;
exports.PopoverArrow = PopoverArrow;
exports.PopoverClose = PopoverClose;
exports.PopoverContent = PopoverContent;
exports.PopoverTrigger = PopoverTrigger;
exports.Root = Root;
exports.Trigger = Trigger;
exports.createPopoverScope = g;
